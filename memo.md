# Memo

テーマ: 自動販売機をモデリングする

## 2021.03.25

- やったこと
  - 飲料を値オブジェクトとして作成
  - １つユースケースを考えて実装
    - 100 円入れてソーダが買える
      - 100 円入れて 100 円で購入可能な飲料の一覧のを返却する
      - ランプを押すと対象の飲料が購入できる＆おつりが返却される
- やること
  - ドリンクの在庫を管理するリポジトリを作成する

## 2021.04.01

- やったこと
  - ドリンクの在庫を管理するリポジトリのインターフェースを作成
  - インターフェースを使ってユースケースを実装
  - ユースケース層のテストコードを実装
  - リポジトリを外部から注入
- やること
  - usecase を増やしていく
    - ボタンが押された Drink を返却する
  - テストケースを増やす
    - 金額に応じた
    - テスト NG の場合もやりたい

## めも

- value object とは？
  - 1. 不変である
  - 2. 交換が可能である
    - 再代入は OK だが、メソッドを生やしてオブジェクト内部の値を書き換えるのは禁止
      - ex) OK
        - `var fullName = new Fullname("seiichi", "arai")`
        - `fullName = new Fullname("haruna", "oka")`
  - 3. 等価性によって比較される
    - クラスの比較メソッドを使って属性を比較する
- entity とは？
  - 1. 可変である
  - 2. 同じ属性であっても区別される
  - 3. 同一性によって区別される
    - クラスの比較メソッドを使って**id**を比較する
- value object と entity の違い
  - id を持つのが entity
  - システムによって value object なのか entity なのかは異なる
  - value object と entity は排他的（value object かつ entity という状態は存在しない）
  - <https://little-hands.hatenablog.com/entry/2018/12/09/entity-value-object>
- ドメインサービス
  - > 値オブジェクトやエンティティに記述すると不自然になってしまう振る舞いが存在します。ドメインサービスはそういった不自然さを解決するオブジェクトです。
  - 複数の値オブジェクト/エンティティがやり取りする中で、いずれかの値オブジェクト/エンティティに振る舞いとして持たせるのは不自然なケースにおいて利用されるイメージ

## もやもや
